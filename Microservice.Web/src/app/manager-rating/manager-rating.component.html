<div style="background:#F1F1F1;">
  <div class="row">
    <div class="col-lg-2"> </div>
    <div class="col-lg-3">
      <ul class="info" style="list-style:none;">
        <li>
          <b> Reporting Manager : {{ManagerName}}</b>
        </li>
      </ul>
    </div>
    <div class="col-lg-7"></div>
  </div>
  <div class="row" style="background:#F1F1F1">
    <div class="col-lg-12  tableHead" style="background:#F1F1F1">
      <b> Managerial Goals </b>
    </div>
  </div>

  <div class="row" style="background:#F1F1F1">
    <div class="col-lg-10" style="background:#F1F1F1">

      <form class="example-form" [formGroup]="myform">
        <table class="table table1 data">
          <thead>
            <tr style=" background:#DFE0E1;
              color:#8306FF;">
              <!-- <th>Goals</th> -->
              <th>Goal</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Weightage </th>
              <th style="width: 10%;">Rate</th>
              <th style="width: 35%;" class="comments">Comment</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr style=" background:white;" *ngFor="let goal of mergedArray">
              <!-- <td>{{goal.GoalId}} </td> -->
              <td>{{goal.Goal}} </td>
              <td *ngIf="goal.GoalType == 1">Organization Goal</td>
              <td *ngIf="goal.GoalType == 2">Desgination Goal</td>
              <td *ngIf="goal.GoalType == 4">Employee Goal</td>
              <td>{{goal.StartDate | date: 'dd/MM/yyyy'}} </td>
              <td>{{goal.EndDate | date: 'dd/MM/yyyy'}} </td>
              <td>{{goal.Weightage}}</td>

              <td *ngIf="(goal.Id == 0 && Show!=goal.GoalId+''+goal.GoalType) || (goal.Id != 0 && Show!=goal.GoalId+''+goal.GoalType)">
                {{goal.Rating}}
              </td>

              <td *ngIf="goal.Id == 0 && Show == goal.GoalId+''+goal.GoalType">
                <input class="form-control" style="width:61%; height: 26px;" type="text" formControlName="Rating" [(ngModel)]="rt">
                <div class="errmsg" *ngIf="myform.controls['Rating'].invalid && myform.controls['Rating'].touched ">*this field is mandatory.</div>
                <div class="errmsg" *ngIf="myform.controls['Rating'].hasError('min') || myform.controls['Rating'].hasError('max')">
                  *Range[0-5].
                </div>
              </td>
              <td *ngIf="goal.Id != 0 && Show == goal.GoalId+''+goal.GoalType">
                <input class="form-control" style="width:61%; height: 26px;" type="text" formControlName="Rating" [(ngModel)]="goal.Rating ">
                <div class="errmsg" *ngIf="myform.controls['Rating'].invalid && myform.controls['Rating'].touched ">*this field is mandatory.</div>
                <div class="errmsg" *ngIf="myform.controls['Rating'].hasError('min') || myform.controls['Rating'].hasError('max')">
                  *Range[0-5].
                </div>
              </td>

              <td *ngIf="(goal.Id == 0 && Show!=goal.GoalId+''+goal.GoalType) || (goal.Id != 0 && Show!=goal.GoalId+''+goal.GoalType)">
                {{goal.Comment}}
              </td>

              <td *ngIf="goal.Id == 0 && Show == goal.GoalId+''+goal.GoalType">
                <input class="form-control" style="width:80%;height: 30px;" type="text" formControlName="Comment" [(ngModel)]="ct">
                <div class="errmsg" *ngIf="myform.controls['Comment'].invalid && myform.controls['Comment'].touched ">*this field is mandatory.</div>
                <div class="errmsg" *ngIf="myform.controls['Comment'].hasError('minlength')">
                  *Atleast 8 characters long.
                </div>
              </td>
              <td *ngIf="goal.Id != 0 && Show == goal.GoalId+''+goal.GoalType">
                <input class="form-control" style="width:80%;height: 30px;" type="text" formControlName="Comment" [(ngModel)]="goal.Comment">
                <div class="errmsg" *ngIf="myform.controls['Comment'].invalid && myform.controls['Comment'].touched ">*this field is mandatory.</div>
                <div class="errmsg" *ngIf="myform.controls['Comment'].hasError('minlength')">
                  *Atleast 8 characters long.
                </div>
              </td>

              <td style="width: 9%;">
                <img *ngIf="goal.Id == 0 && Show != goal.GoalId+''+goal.GoalType" src=".\assets\Images\Group 51.png" (click)="Show=goal.GoalId+''+goal.GoalType">
                <img *ngIf="goal.Id != 0 && Show != goal.GoalId+''+goal.GoalType" src=".\assets\Images\Group 51.png" (click)="Show=goal.GoalId+''+goal.GoalType">
                <!-- <img *ngIf="goal.Id == 0 && Show == goal.GoalId+''+goal.GoalType" style="width: 21%;" src=".\assets\Images\download.png"
                  (click)="SubmitRatings(goal) + Show=false">
                <img *ngIf="goal.Id != 0 && Show == goal.GoalId+''+goal.GoalType" style="width: 21%;" src=".\assets\Images\download.png"
                  (click)="SubmitRatings(goal) + Show=false"> -->

                  <input type="image" *ngIf="goal.Id == 0 && Show == goal.GoalId+''+goal.GoalType" [disabled]="!myform.valid" style="width: 21%;" src=".\assets\Images\download.png"
                    (click)="SubmitRatings(goal) + Show=false">
                    <input type="image" *ngIf="goal.Id != 0 && Show == goal.GoalId+''+goal.GoalType"  [disabled]="!myform.valid" style="width: 21%;" src=".\assets\Images\download.png"
                    (click)="SubmitRatings(goal) + Show=false">
              </td>
            </tr>
            <tr style="background:white;" *ngIf="!ManagerialGoal|| ManagerialGoal.length==0">
              <td colspan="8">
                No records found !
              </td>
            </tr>
          </tbody>
        </table>
        <div class="Msg">{{message}}</div>
      </form>
    </div>
  </div>



  <!-- SESSION EXPIRE ALERT -->
  <ng-template #contactTemplateRef let-dialogRef="dialogRef">
    <app-session-expire-dialog (childdata)='dialogRef.close(true)'></app-session-expire-dialog>
  </ng-template>